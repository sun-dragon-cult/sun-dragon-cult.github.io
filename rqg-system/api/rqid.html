<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-rqg-system/api/rqid" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">RQG System ID (rqid) | RuneQuest Glorantha for Foundry VTT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sun-dragon-cult.github.io/img/sdc.jpg"><meta data-rh="true" name="twitter:image" content="https://sun-dragon-cult.github.io/img/sdc.jpg"><meta data-rh="true" property="og:url" content="https://sun-dragon-cult.github.io/rqg-system/api/rqid"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RQG System ID (rqid) | RuneQuest Glorantha for Foundry VTT"><meta data-rh="true" name="description" content="What is it for"><meta data-rh="true" property="og:description" content="What is it for"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://sun-dragon-cult.github.io/rqg-system/api/rqid"><link data-rh="true" rel="alternate" href="https://sun-dragon-cult.github.io/rqg-system/api/rqid" hreflang="en"><link data-rh="true" rel="alternate" href="https://sun-dragon-cult.github.io/rqg-system/api/rqid" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/release-notes/rss.xml" title="RuneQuest Glorantha for Foundry VTT RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release-notes/atom.xml" title="RuneQuest Glorantha for Foundry VTT Atom Feed"><link rel="stylesheet" href="/assets/css/styles.982c1523.css">
<script src="/assets/js/runtime~main.b5f518fb.js" defer="defer"></script>
<script src="/assets/js/main.156443ae.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_SuGK" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sdc.svg" alt="Sun Dragon Cult Logo" class="themedComponent_Z1ZB themedComponent--light_VC7A"><img src="/img/sdc.svg" alt="Sun Dragon Cult Logo" class="themedComponent_Z1ZB themedComponent--dark_Wf1y"></div><b class="navbar__title text--truncate">RQG Foundry VTT System</b></a><a class="navbar__item navbar__link" href="/wiki/wiki-module">Wiki Module</a><a class="navbar__item navbar__link" href="/release-notes">Release Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sun-dragon-cult/fvtt-system-rqg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rRFP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle__5rc colorModeToggle_bhF9"><button class="clean-btn toggleButton_Exd5 toggleButtonDisabled_kivQ" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_szxj"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_QDK_"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_SJ9W"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_YE3n"><div class="docsWrapper_j7rR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iVV5" type="button"></button><div class="docRoot_fbFi"><aside class="theme-doc-sidebar-container docSidebarContainer_Wt78"><div class="sidebarViewport_jGLU"><div class="sidebar_adh2"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_EfVV"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">RuneQuest Glorantha for Foundry VTT</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rqg-system/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rqg-system/getting-started/creating-actor">Creating an Adventurer</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rqg-system/character-sheet">Character Sheet</a><button aria-label="Expand sidebar category &#x27;Character Sheet&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rqg-system/items">Foundry Items</a><button aria-label="Expand sidebar category &#x27;Foundry Items&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rqg-system/api">API</a><button aria-label="Collapse sidebar category &#x27;API&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rqg-system/api/migrate">Migrate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rqg-system/api/name-generator">Name Generator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rqg-system/api/rqid">RQG System ID (rqid)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rqg-system/addons">Addons</a><button aria-label="Expand sidebar category &#x27;Addons&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rqg-system/copyright">© Copyright</a></li></ul></nav></div></div></aside><main class="docMainContainer_dkah"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_ktEP"><div class="docItemContainer_uinT"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_ZN_Z" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_21_b"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rqg-system/api"><span itemprop="name">API</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RQG System ID (rqid)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_bYD1 theme-doc-toc-mobile tocMobile_u91Z"><button type="button" class="clean-btn tocCollapsibleButton_vCqu">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RQG System ID (rqid)</h1></header><h2 class="anchor anchorWithStickyNavbar_AmVc" id="what-is-it-for">What is it for<a href="#what-is-it-for" class="hash-link" aria-label="Direct link to What is it for" title="Direct link to What is it for">​</a></h2>
<p>The RQG System manages content in different languages and different compendiums or in the world by
using a RQG System ID or &quot;rqid&quot;. The id&#x27;s are stored as flags on documents under the &quot;rqg&quot; scope as
an object &quot;documentRqidFlags&quot; containing <strong>id</strong>, <strong>lang</strong> &amp; <strong>priority</strong> properties.</p>
<p>A rqid is not a unique id, instead it defines what &quot;kind&quot; a document is. The purpose is to let
different versions of the same document coexist so the &quot;best&quot; version can be used. A &quot;kind&quot; can be
something like a specific skill like &quot;Dodge&quot;, or a description of a specific spell. It also defines
what language the document is written in, and it has a priority that ranks documents with the same
id and language (higher is better).</p>
<p>An advantage of using rqid for links between documents is that the risk of broken links are greatly
reduced, compared to linking documents using the Foundry Uuid. If a link is broken you just need to
either make sure a document matching the requested rqid once again is available in your world or in
a compendium, or change the link to some other rqid that exists. See
<a href="/rqg-system/api/rqid#current-usage-in-the-system">Current usage in the system</a> for details on what
it&#x27;s currently used for.</p>
<p>If you want to link to a specific instance of a document you should use the Foundry uuid instead.</p>
<h2 class="anchor anchorWithStickyNavbar_AmVc" id="what-are-the-parts">What are the parts<a href="#what-are-the-parts" class="hash-link" aria-label="Direct link to What are the parts" title="Direct link to What are the parts">​</a></h2>
<p>A normal rqid comes in 3 parts separated by dots <code>.</code> like this: <code>i.skill.fast-talk</code>. It should be
all lower case letters without any spaces.</p>
<ol>
<li>The first part is an abbreviated document type, see below. It supports many different document
types, but the system only uses links to items and journals so far.</li>
</ol>
<details class="details_PqX4 alert alert--info details_h2rX" data-collapsed="true"><summary>Document type abbreviation table</summary><div><div class="collapsibleContent_kvzD"><table><thead><tr><th></th><th>Foundry Document Type</th></tr></thead><tbody><tr><td><strong>a</strong></td><td>Actor</td></tr><tr><td><strong>c</strong></td><td>Cards</td></tr><tr><td><strong>i</strong></td><td>Item</td></tr><tr><td><strong>je</strong></td><td>JournalEntry</td></tr><tr><td><strong>jp</strong></td><td>JournalEntryPage <em>(Only allowed as embedded in JournalEntry)</em></td></tr><tr><td><strong>m</strong></td><td>Macro</td></tr><tr><td><strong>p</strong></td><td>Playlist</td></tr><tr><td><strong>rt</strong></td><td>RollTable</td></tr><tr><td><strong>s</strong></td><td>Scene</td></tr></tbody></table></div></div></details>
<ol start="2">
<li>
<p>The second part is the document subtype if there is any. In RQG there are a number of item types
like <code>skill</code>, <code>hit-location</code> and <code>rune</code> etc.</p>
</li>
<li>
<p>The third part is usually related to the name of the document in english. If it is a journal
entry for example is describing the spell bladesharp (rqid <code>i.spirit-magic.bladesharp</code>), it can
be called <code>je..bladesharp</code></p>
</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_blcK alert alert--info"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>rqids for embedded documents</div><div class="admonitionContent_SKVj"><p>There is also a possibility to link to a document that is embedded. This is mostly useful for adding
a link to a journal entry page inside a journal entry. The rqid for that can look like this
<code>je..spells.jp..ignite</code> where the first section (<code>je..spells</code>) defines what document it is, and the
appended section (<code>jp..ignite</code>) defines what embedded document to find inside that document.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_AmVc" id="search-priorities">Search priorities<a href="#search-priorities" class="hash-link" aria-label="Direct link to Search priorities" title="Direct link to Search priorities">​</a></h2>
<p>The available documents matching &quot;rqid&quot; and &quot;lang&quot; will be searched, and it will return the one with
the highest priority. This allows later RQG content packs to override older information. The GM can
also use this to create compendium packs with documents that override the ones provided by the
system.</p>
<p>A search for a document can look like this:
<code>await game.system.api.rqid.fromRqid(&quot;i.skill.act&quot;, &quot;es&quot;)</code> to find the best available act skill in
Spanish.</p>
<p>The priorities are:</p>
<ol>
<li>The id has to match the query</li>
<li>The language - either the one specified in the query, the world language (as in the setting) or
the fallback language (english)</li>
<li>The found document is in the world - documents in compendium are only searched if no match is
found in imported world documents.</li>
</ol>
<div class="theme-admonition theme-admonition-danger admonition_blcK alert alert--danger"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_SKVj"><p>Currently, any document in the world will have a higher &quot;effective&quot; priority compared to a document
in a compendium, even if the priority value is lower.</p><p>It&#x27;s under consideration to change this so the priority is honored no matter where the document is
located.</p></div></div>
<details class="details_PqX4 alert alert--info details_h2rX" data-collapsed="true"><summary>Examples of priorities and search results</summary><div><div class="collapsibleContent_kvzD"> <p>A spell item has a rqid link <code>je..befuddle</code> to a journal entry that describes that spell. When a
player clicks the link a search is done to find the best match.</p><p>Suppose these journal entries describing some spirit magic spells exist:</p><ol>
<li>rqid: <code>je..befuddle</code>, language: <code>en</code>, priority: <code>0</code> <em>(from the wiki module)</em></li>
<li>rqid: <code>je..befuddle</code>, language: <code>en</code>, priority: <code>1000</code> <em>(from a future english Red Book of Magic
module)</em></li>
<li>rqid: <code>je..befuddle</code>, language: <code>es</code>, priority: <code>0</code> <em>(from a custom &quot;translation to Spanish&quot;
module)</em></li>
<li>rqid: <code>je..demoralize</code>, language: <code>en</code>, priority: <code>0</code> <em>(from the wiki module)</em></li>
<li>rqid: <code>je..demoralize</code>, language: <code>en</code>, priority: <code>1000</code> <em>(from a future english Red Book of
Magic module)</em></li>
</ol><ul>
<li>A search for <code>fromRqid(&quot;je..befuddle&quot;, &quot;en&quot;)</code> would return journal entry 2, since that has the
highest priority.</li>
<li>A search for <code>fromRqid(&quot;je..befuddle&quot;, &quot;es&quot;)</code> would return journal entry 3 even though journal
entry 2 has a higher priority since the language is more important than the priority.</li>
<li>A search for <code>fromRqid(&quot;je..demoralize&quot;, &quot;es&quot;)</code> would return journal entry 5 since there is no
spanish version with that rqid, but the fallback language is english, and journal entry 5 has a
higher priority compared to journal entry 4.</li>
</ul></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_AmVc" id="current-usage-in-the-system">Current usage in the system<a href="#current-usage-in-the-system" class="hash-link" aria-label="Direct link to Current usage in the system" title="Direct link to Current usage in the system">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="1-open-the-best-description-of-skills-spells-etc">1. Open the &quot;best&quot; description of skills, spells etc<a href="#1-open-the-best-description-of-skills-spells-etc" class="hash-link" aria-label="Direct link to 1. Open the &quot;best&quot; description of skills, spells etc" title="Direct link to 1. Open the &quot;best&quot; description of skills, spells etc">​</a></h3>
<p>A number of RQG items have a &quot;rqidLink&quot; to a journal entry description. The advantage of this is
that the &quot;best&quot; version will be opened. For example if you only have the wiki module installed then
that (limited) description will be opened. If you in the future install a premium module that
contains a more elaborated description with the same rqid, but higher priority, then that will be
opened instead.</p>
<p>This can also be used to change what language version is opened, since the world language setting is
tried first. If no description is found in that language the english version is opened (if that
exists).</p>
<div class="theme-admonition theme-admonition-note admonition_blcK alert alert--secondary"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>For reference, these RQG items that have a rqid description link</div><div class="admonitionContent_SKVj"><ul>
<li>Cult</li>
<li>Rune</li>
<li>Rune Magic</li>
<li>Spirit Magic</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-note admonition_blcK alert alert--secondary"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>discussion</div><div class="admonitionContent_SKVj"><p>Removing the world language setting and relying on the user language is probably a bad idea since it
could make it hard to know what the players actually will see.</p><p>For example a game played in Spanish where one player has selected Swedish as the Foundry language
would mean that the Swedish user would get the default English versions of any linked journal
entries - and they might not match the journals the GM has prepared.</p><p>I think it&#x27;s natural that a game is played in one language (matching the world language setting) and
that all players see the documents in that language. Then again you could argue that since there is
a user language setting in Foundry, and since that will affect the Foundry interface language, it
might make sense to use that instead.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="2-identify-special-skills">2. Identify &quot;special&quot; skills<a href="#2-identify-special-skills" class="hash-link" aria-label="Direct link to 2. Identify &quot;special&quot; skills" title="Direct link to 2. Identify &quot;special&quot; skills">​</a></h3>
<p>There are a few skills that need special handling, and these are identified by the system by looking
at the rqid of the skills. This allows the name of these skills to be translated into any language.</p>
<ul>
<li>dodge: <code>i.skill.dodge</code>,</li>
<li>jump: <code>i.skill.jump</code>,</li>
<li>moveQuietly: <code>i.skill.move-quietly</code>,</li>
<li>spiritCombat: <code>i.skill.spirit-combat</code>,</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="3-specify-what-hit-locations-each-armor-piece-protects">3. Specify what hit locations each armor piece protects<a href="#3-specify-what-hit-locations-each-armor-piece-protects" class="hash-link" aria-label="Direct link to 3. Specify what hit locations each armor piece protects" title="Direct link to 3. Specify what hit locations each armor piece protects">​</a></h3>
<p>Armor items needs to specify what hit locations they protect. This is accomplished by a list of
rqids for hit location items. When a piece of armor is embedded in an actor and equipped, the
embedded hit location items that matches the rqids in the armor item is found and the protection is
applied.</p>
<p>Note that this usage of rqid does not use the language, instead it only searches for the rqids in
the embedded items of the actor using the <code>actor.getBestEmbeddedDocumentByRqid(rqid)</code> function on
the RqgActor class.</p>
<p><em>The list of available hit-locations is indexed at startup, see green box further down.</em></p>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="4-link-rune-magic-spells-to-runes">4. Link Rune magic spells to runes<a href="#4-link-rune-magic-spells-to-runes" class="hash-link" aria-label="Direct link to 4. Link Rune magic spells to runes" title="Direct link to 4. Link Rune magic spells to runes">​</a></h3>
<p>Rune Magic spells have a list of rune rqids to identify what runes they can be cast with. When the
spell is cast the rqids are used to find the rune items that are embedded in the actor to figure out
success chances.</p>
<p><em>The list of available runes is indexed at startup, see green box further down.</em></p>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="5-link-sorcery-spells-skills-to-runes">5. Link Sorcery spells (skills) to runes<a href="#5-link-sorcery-spells-skills-to-runes" class="hash-link" aria-label="Direct link to 5. Link Sorcery spells (skills) to runes" title="Direct link to 5. Link Sorcery spells (skills) to runes">​</a></h3>
<div class="theme-admonition theme-admonition-danger admonition_blcK alert alert--danger"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_SKVj"><p>Support for sorcery is still alpha level and <strong>will</strong> change, see
<a href="/rqg-system/character-sheet/sorcery">Sorcery</a>.</p></div></div>
<p><em>The list of available runes is indexed at startup, see green box further down.</em></p>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="6-rune-links">6. Rune links<a href="#6-rune-links" class="hash-link" aria-label="Direct link to 6. Rune links" title="Direct link to 6. Rune links">​</a></h3>
<p>Runes use rqid to define what the minor and opposite runes are for a particular rune. Currently only
the &quot;opposite&quot; rune link is used for finding what other Power rune to adjust when a Power runes
chance is adjusted.</p>
<p><em>The list of available runes is indexed at startup, see green box further down.</em></p>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="7-active-effects">7. Active Effects<a href="#7-active-effects" class="hash-link" aria-label="Direct link to 7. Active Effects" title="Direct link to 7. Active Effects">​</a></h3>
<div class="theme-admonition theme-admonition-danger admonition_blcK alert alert--danger"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_SKVj"><p>The RQG Active Effects implementation is still alpha level and could change completely, possibly
without a migration for any active effects in current worlds.</p></div></div>
<p>The RQG system specific way of adding Foundry active effects to embedded items is to add a <code>Custom</code>
active effect where the &quot;Attribute Key&quot; is following the format <code>&lt;rqid:path&gt;</code>. For example the
system supplied &quot;protection&quot; token effects use this to add natural armor to an actor. This is
currently done by adding a list of Active Effects like <code>i.hit-location.head:system.naturalAp</code> for
each humanoid hit location.</p>
<div class="theme-admonition theme-admonition-note admonition_blcK alert alert--secondary"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Possible future improvement</div><div class="admonitionContent_SKVj"><ul>
<li>This could be improved if the rqid part could contain partial rqids. In the example above a
&quot;natural armor&quot; active effect could then be described by a single effect like
<code>i.hit-location.:system.naturalAp</code> and it would affect all hit locations embedded in an actor.</li>
<li>It&#x27;s also currently only possible to add values, since the &quot;CUSTOM&quot; change mode is used to
describe that an item should be affected. Making use of the normal Change Modes like &quot;ADD&quot;,
&quot;SUBTRACT&quot;, &quot;MULTIPLY&quot;, etc. could improve the usability further.</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="8-link-to-weapon-skills">8. Link to weapon skills<a href="#8-link-to-weapon-skills" class="hash-link" aria-label="Direct link to 8. Link to weapon skills" title="Direct link to 8. Link to weapon skills">​</a></h3>
<p>Weapons are linked to which skills they use for each usage (like one handed, two handed or missile).
The links use rqid and when a weapon is embedded, first a check if a skill matching the rqid is
already embedded, and if not a search for the best skill is done and that one is embedded on the
actor.</p>
<p>When a weapon is used the rqid is used to find the embedded skill to roll against.</p>
<h3 class="anchor anchorWithStickyNavbar_AmVc" id="9-cults--rune-magic-spells">9. Cults &amp; Rune Magic Spells<a href="#9-cults--rune-magic-spells" class="hash-link" aria-label="Direct link to 9. Cults &amp; Rune Magic Spells" title="Direct link to 9. Cults &amp; Rune Magic Spells">​</a></h3>
<p>Cults have rqid links to both what runes the cult has and what common rune magic spells you should
get when joining the cult.</p>
<p>The linked common rune spells are embedded in the actor when the cult item is embedded in the actor.
If the spell is not already embedded in the actor, a search for the best version of the linked
spells is done using the world language. On the actor sheet these spells have a marking, and to know
which spells gets marks is compares the rqid to that list.</p>
<p>When casting rune magic spells the runes to cast with is searched in the actor by using rqid.</p>
<div class="theme-admonition theme-admonition-tip admonition_blcK alert alert--success"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Runes and hit location items in compendiums are indexed at startup (usage 3-5)</div><div class="admonitionContent_SKVj"><p>When (re)loading the browser all compendiums containing all rune and hit location items are indexed
and lists of all unique runes / hit locations that are available are compiled. The world language is
used to select what language should be part of the list, and the highest priority item that matched
the world language for each rqid is kept. These lists are used to populate dropdowns of available
runes / hit locations.</p><p>Please note that world runes / hit locations are not part of this indexing, so if you want to add
more runes or hit locations than are provided by the wiki module, then you need to put the extra
items in a compendium pack of your own.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_AmVc" id="using-it-from-a-macro">Using it from a macro<a href="#using-it-from-a-macro" class="hash-link" aria-label="Direct link to Using it from a macro" title="Direct link to Using it from a macro">​</a></h2>
<p>When a macro or module, needs a specific document, for example a Broadsword or the journal entry
describing dwarves, it can call <code>await game.system.api.rqid.fromRqid(&quot;i.weapon.broadsword&quot;, &quot;es&quot;)</code>,
where the first parameter is the invariant rqid, and the second parameter is the requested language
code. If you do not include a language code, it will use the language from the setting &quot;world
language&quot; when searching for the document. If the document is not available in the requested
language it will try to find it in English as a fallback before giving up.</p>
<div class="theme-admonition theme-admonition-danger admonition_blcK alert alert--danger"><div class="admonitionHeading_JvW0"><span class="admonitionIcon_WBg9"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Not Yet Implemented - TODO ⚠️</div><div class="admonitionContent_SKVj"><h2 class="anchor anchorWithStickyNavbar_AmVc" id="changing-language-in-a-world">Changing language in a world<a href="#changing-language-in-a-world" class="hash-link" aria-label="Direct link to Changing language in a world" title="Direct link to Changing language in a world">​</a></h2><p>Actors and items embedded in an actor will not be changed even if you switch language in the world
language setting, or activate a module that contains higher priority versions of the same items.</p><p>It should be possible to &quot;migrate&quot; a world to a different language. Or change an English module to
use for example Spanish item names.</p><p>It&#x27;s probably only reasonable to let such a migration affect world items?</p><p>Possible ways this could be done:</p><ul>
<li>A script that goes through all world actors and the embedded items, and for each item overwrites
the name and possibly other properties from the item with the same rqid, but matching the world
language.</li>
<li>A way to migrate a specific actor, maybe with an &quot;upgrade&quot; button on the actor sheet in edit mode
that searches for the best version of each embedded item and overwrites selected properties from
there.</li>
</ul></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rqg-system/api/name-generator"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Name Generator</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rqg-system/addons"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">3rd party modules</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_ElIH thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-it-for" class="table-of-contents__link toc-highlight">What is it for</a></li><li><a href="#what-are-the-parts" class="table-of-contents__link toc-highlight">What are the parts</a></li><li><a href="#search-priorities" class="table-of-contents__link toc-highlight">Search priorities</a></li><li><a href="#current-usage-in-the-system" class="table-of-contents__link toc-highlight">Current usage in the system</a><ul><li><a href="#1-open-the-best-description-of-skills-spells-etc" class="table-of-contents__link toc-highlight">1. Open the &quot;best&quot; description of skills, spells etc</a></li><li><a href="#2-identify-special-skills" class="table-of-contents__link toc-highlight">2. Identify &quot;special&quot; skills</a></li><li><a href="#3-specify-what-hit-locations-each-armor-piece-protects" class="table-of-contents__link toc-highlight">3. Specify what hit locations each armor piece protects</a></li><li><a href="#4-link-rune-magic-spells-to-runes" class="table-of-contents__link toc-highlight">4. Link Rune magic spells to runes</a></li><li><a href="#5-link-sorcery-spells-skills-to-runes" class="table-of-contents__link toc-highlight">5. Link Sorcery spells (skills) to runes</a></li><li><a href="#6-rune-links" class="table-of-contents__link toc-highlight">6. Rune links</a></li><li><a href="#7-active-effects" class="table-of-contents__link toc-highlight">7. Active Effects</a></li><li><a href="#8-link-to-weapon-skills" class="table-of-contents__link toc-highlight">8. Link to weapon skills</a></li><li><a href="#9-cults--rune-magic-spells" class="table-of-contents__link toc-highlight">9. Cults &amp; Rune Magic Spells</a></li></ul></li><li><a href="#using-it-from-a-macro" class="table-of-contents__link toc-highlight">Using it from a macro</a></li><li><a href="#changing-language-in-a-world" class="table-of-contents__link toc-highlight">Changing language in a world</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/">Overview</a><span class="footer__link-separator">·</span><a class="footer__link-item" href="/about">About Sun Dragon Cult</a><span class="footer__link-separator">·</span><a class="footer__link-item" href="/release-notes">Release Notes</a><span class="footer__link-separator">·</span><a href="https://discord.gg/foundryvtt" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rRFP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://github.com/sun-dragon-cult/fvtt-system-rqg" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rRFP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/sdc.svg" class="footer__logo themedComponent_Z1ZB themedComponent--light_VC7A" width="100"><img src="/img/sdc.svg" class="footer__logo themedComponent_Z1ZB themedComponent--dark_Wf1y" width="100"></div><div class="footer__copyright">Sun Dragon Cult — RuneQuest Glorantha for Foundry VTT</div></div></div></footer></div>
</body>
</html>