"use strict";(self.webpackChunksun_dragon_cult=self.webpackChunksun_dragon_cult||[]).push([[126],{2224:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>h});var i=n(5893),s=n(1151);const o={slug:"rqg-v2.2.0",title:"RQG 2.2.0",tags:["rqg","release","changelog"]},a=void 0,l={permalink:"/release-notes/rqg-v2.2.0",source:"@site/release-notes/rqg/v2.2.x/2023-06-14-v2.2.0.mdx",title:"RQG 2.2.0",description:"Supported Foundry Versions",date:"2023-06-14T00:00:00.000Z",formattedDate:"June 14, 2023",tags:[{label:"rqg",permalink:"/release-notes/tags/rqg"},{label:"release",permalink:"/release-notes/tags/release"},{label:"changelog",permalink:"/release-notes/tags/changelog"}],readingTime:8.33,hasTruncateMarker:!1,authors:[],frontMatter:{slug:"rqg-v2.2.0",title:"RQG 2.2.0",tags:["rqg","release","changelog"]},unlisted:!1,prevItem:{title:"RQG 2.2.1",permalink:"/release-notes/rqg-v2.2.1"}},r={authorsImageUrls:[]},h=[{value:"Weapon&#39;s skills link <em>[Breaking!]</em>",id:"weapons-skills-link-breaking",level:2},{value:"Rqid Batch Editor steps",id:"rqid-batch-editor-steps",level:2},{value:"\u2460 Skills",id:"-skills",level:3},{value:"\u2461 Rune Magic Spells",id:"-rune-magic-spells",level:3},{value:"\u2462 Hit Locations",id:"-hit-locations",level:3},{value:"New Syntax for custom active effects <em>[Breaking!]</em>",id:"new-syntax-for-custom-active-effects-breaking",level:2},{value:"Sub cult refactoring <em>[Breaking!]</em>",id:"sub-cult-refactoring-breaking",level:2},{value:"add common rune magic when embedding a cult",id:"add-common-rune-magic-when-embedding-a-cult",level:2},{value:"Token HUD Effects",id:"token-hud-effects",level:2},{value:"ActorSheet wounded effects",id:"actorsheet-wounded-effects",level:2},{value:"Skills without specialisation warning on Actor Sheet",id:"skills-without-specialisation-warning-on-actor-sheet",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",p:"p",strong:"strong",...(0,s.a)(),...e.components},{GithubIssue:o}=t;return o||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("GithubIssue",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{src:"https://img.shields.io/endpoint?url=https://foundryshields.com/version?url=https://github.com/sun-dragon-cult/fvtt-system-rqg/releases/download/v2.2.0/system.json",alt:"Supported Foundry Versions"}),"\n",(0,i.jsx)(t.img,{src:"https://img.shields.io/github/downloads/sun-dragon-cult/fvtt-system-rqg/v2.2.0/rqg.zip",alt:"Download Count"})]}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["Please note that if you have items / actors in compendiums, the migration won't work for them. That\nwill be fixed in ",(0,i.jsx)(t.a,{href:"/release-notes/rqg-v2.2.1",children:"version 2.2.1"})," will be fixed in\n",(0,i.jsx)(t.a,{href:"/release-notes/rqg-v2.2.1",children:"version 2.2.1"})]})}),"\n",(0,i.jsxs)(t.p,{children:["This release might be a bit disruptive to already existing worlds since it changes the model of how\nthings are stored. Sorry for this wall of text but please read it before upgrading. And as always -\nreally do take a backup before you start! The full changelog can be found here\n",(0,i.jsx)(t.a,{href:"https://github.com/sun-dragon-cult/fvtt-system-rqg/blob/main/CHANGELOG.md",children:"CHANGELOG.md"})]}),"\n",(0,i.jsxs)(t.h2,{id:"weapons-skills-link-breaking",children:["Weapon's skills link ",(0,i.jsx)(t.em,{children:"[Breaking!]"})]}),"\n",(0,i.jsx)(o,{issue:"290",repo:"fvtt-system-rqg"}),"\n",(0,i.jsx)(t.p,{children:"Previously the link from weapon items to the skills that's needed to use them used a Foundry uuid to\npoint to a skill when the weapon item was not embedded and a item id to point to the skill item on\nthe same actor when then weapon item was embedded on an actor. This meant that if the weapon skill\nin your world was deleted, then all weapon pointing to that skill would be broken. Now the skill\nitem is referenced with a rqid instead, which means that as long as you have at least one skill item\nin your world or compendium with the correct rqid, the weapon item will find it. Hopefully this will\nmake the setup more resilient to changes in your worlds."}),"\n",(0,i.jsx)(t.p,{children:'The Migration will try to find the skill previously linked and use the rqid on that skill to update\nto the new way of linking skills, if it fails (because it can\'t find a skill with an rqid on it) it\nwill save the previous values and show "NOT FOUND" when the weapon use tab is shown, and hovering\nwill tell you the content of the previous links. In this screenshot the weapon was broken even\nbefore the migration since both links were "undefined".'}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(2612).Z+"",width:"449",height:"201"})}),"\n",(0,i.jsx)(t.h2,{id:"rqid-batch-editor-steps",children:"Rqid Batch Editor steps"}),"\n",(0,i.jsx)(t.p,{children:'Starting to use Rqids for linking weapon skills is a big change and to migrate your worlds I\'ve\nincorporated a "Batch Rqid Editor" that is run before the actual migration scrips in order to set\nRqids on the items that needs it (similar to the CoC one if you\'ve seen that one). It will go\nthrough all items in your world and for each item that is missing an rqid it will display a row for\neach distinct name (for example Jump) to let you set the rqid for all items with that name.\nCurrently it will show forms to set rqids for skill, rune magic & hit location items one after the\nother. If it finds an exact match for the name of an item with an existing item that already has a\nset rqid, then it will autofill that rqid in the form. The "Existing Rqids" dropdown lists all rqids\nthat exist in the system.'}),"\n",(0,i.jsx)(t.p,{children:'There is a "magic wand" icon to the right of the rqid input field that will take the name of the\nitem and convert that into a rqid. That can speed up the entering of data a lot, but take care to\ntry and use the already existing rqids where possible. The rqid should be in english even if you\nhave translated the system.'}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"\u26a0 One word of caution"})," - on my machine the form makes Chrome crash on larger worlds, and after a\nlot of debugging I came to the conclusion that it was a Chrome extension that went haywire when it\nsaw this form with all those input fields. It's not so fun to come half way into filling this form\nonly to have everything disappear, so if you want to be on the safe side I would recommend doing the\nmigration in an incognito window without any extensions."]}),"\n",(0,i.jsx)(t.h3,{id:"-skills",children:"\u2460 Skills"}),"\n",(0,i.jsx)(t.p,{children:"The important ones to set Rqid on are the weapon skills and Dodge, Jump, Move Quietly & Spirit\nCombat. The others can be left blank. When it comes to weapon skills there has been a lot of\nvariation historically what they have been called. Even though it will currently work whatever rqid\nyou set, I recommend to try and follow this standard for the rqid:"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Melee-weapon skills"})," usually are called something like ",(0,i.jsx)(t.code,{children:"1H Daggers (Dagger)"})," note plural on the\ncategory ",(0,i.jsx)(t.code,{children:"Daggers"})," which translates to a rqid of ",(0,i.jsx)(t.code,{children:"i.skill.1h-daggers-dagger"}),". Most of you probably\ndo not have offhand skills, but if you do, the rqid should be the same as the primary hand skill\nwith a ",(0,i.jsx)(t.code,{children:"-offhand"})," suffix, for example ",(0,i.jsx)(t.code,{children:"1h-daggers-dagger-offhand"}),". There are exceptions like\nQuarterstaff that only is a category with no specialisation."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Missile-weapon skills"})," follow the same pattern of category (specialisation), ",(0,i.jsx)(t.code,{children:"Javelins (Javelin)"}),"\nor as rqid ",(0,i.jsx)(t.code,{children:"i.skill.javelins.javelin"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Natural weapon skills"})," partly follow the same pattern for fist type weapons ",(0,i.jsx)(t.code,{children:"Fists (Fist)"}),", but\nthere are also one of a kind types like ",(0,i.jsx)(t.code,{children:"Grapple"})," etc."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(2789).Z+"",width:"997",height:"479"})}),"\n",(0,i.jsx)(t.h3,{id:"-rune-magic-spells",children:"\u2461 Rune Magic Spells"}),"\n",(0,i.jsx)(t.p,{children:"The system only cares about the common rune magic spells (Command Cult Spirit, Divination, Sanctify,\nSummon Cult Spirit, Dismiss Magic, Extension, Multispell, Find Enemy, Heal Wound, Soul Sight, Spirit\nBlock, and Warding). It is used to mark these spells in the rune magic spell list on the actor sheet\n(see screenshot further down )"}),"\n",(0,i.jsx)(t.h3,{id:"-hit-locations",children:"\u2462 Hit Locations"}),"\n",(0,i.jsx)(t.p,{children:'The Hit location needs Rqids to make the token hud effects work as they should (the protection\neffect will search for humanoid bodyparts on the actor). Please set Rqids on the human hitlocations\n"Head", "Left Arm", "Right Arm", "Chest", "Abdomen", "Left Leg" & "Right Leg" to the "humanoids"\nversion of rqids. You might see more rows depending on what creatures you have in your world, but\nyou can ignore the other hitlocations and leave them unset.'}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(3555).Z+"",width:"1015",height:"495"})}),"\n",(0,i.jsxs)(t.h2,{id:"new-syntax-for-custom-active-effects-breaking",children:["New Syntax for custom active effects ",(0,i.jsx)(t.em,{children:"[Breaking!]"})]}),"\n",(0,i.jsx)(o,{issue:"442",repo:"fvtt-system-rqg"}),"\n",(0,i.jsxs)(t.p,{children:["The syntax for custom Active Effects that affect items have changed. This is a breaking change and\nwill need manual fixing when encountered. The syntax for custom Active Effects previously was\n",(0,i.jsx)(t.code,{children:"<item type>"}),":",(0,i.jsx)(t.code,{children:"<item name>"}),":",(0,i.jsx)(t.code,{children:"<affected path>"})," (for example skill:Dodge",":system",".baseChance). This is\nnow changed to ",(0,i.jsx)(t.code,{children:"<rqid>"}),":",(0,i.jsx)(t.code,{children:"<affected path>"})," (for example i.skill.dodge",":system",'.baseChance). This makes\nthe AE work in any language as well as simplifying the logic when embedding an item with an AE on an\nactor. The rqid for an item can be found by opening the item sheet and clicking "Rqid" in the sheet\nwindow header. The custom AE now also works on string values (previously it only worked on numbers).\nFor example you could make an effect that increases weapon damage by 1d6 by setting the "Attribute\nKey" to i.weapon.broadsword',":system",'.usage.oneHand.damage and the "Effect Value" to +1d6.']}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"not-found",src:n(2163).Z+"",width:"912",height:"341"})}),"\n",(0,i.jsx)(t.p,{children:"When you load your world you will get warning logs in the browser console (F12) looking something\nlike this if you have active effects using the old syntax."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(4923).Z+"",width:"1062",height:"60"})}),"\n",(0,i.jsx)(t.p,{children:"Foundry does not let you edit AE on embedded items, so to fix an actor with a broken AE you need to\ndrag the item to the sidebar, delete the item from the actor, edit the AE on the item and then drag\nit back to the actor."}),"\n",(0,i.jsx)(t.p,{children:"Please note that I still consider the custom Active Effects as experimental (only a little less so\nafter this change)."}),"\n",(0,i.jsxs)(t.h2,{id:"sub-cult-refactoring-breaking",children:["Sub cult refactoring ",(0,i.jsx)(t.em,{children:"[Breaking!]"})]}),"\n",(0,i.jsx)(o,{issue:"343",repo:"fvtt-system-rqg"}),"\n",(0,i.jsx)(t.p,{children:'The previous cult item could not model Orlanth\'s different subcults and still have one rune pool for\nall of them. Now there is a concept of "deity" and "sub cults". Currently this is mostly important\nfor Orlanth, so if you already have a cult item with the deity Orlanth, when you drag another\nsubcult of orlanth to the actor they will get merged so that they share the same pool of rune\npoints. You can also edit the subcults of a cult item in "Cult" tab on the cult item sheet.'}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:'\u26a0 Please note that if you had entered text in the previous field "Subcults" that is now gone.'}),"\nSo before upgrading it could be wise to look at that field for any actors where it might be\nimportant (read PC actors) and note what subcults they should have so you can manually add them\nafter the upgrade!"]}),"\n",(0,i.jsx)(t.h2,{id:"add-common-rune-magic-when-embedding-a-cult",children:"add common rune magic when embedding a cult"}),"\n",(0,i.jsx)(o,{issue:"153",repo:"fvtt-system-rqg"}),"\n",(0,i.jsx)(t.p,{children:"The cults supplied with the system now has a list of common rune magic spells that you get when\njoining the cult (there is a field in the cult item sheet where they are listed). When dragging a\ncult to an actor the actor will get all of those added. Most cults have the same set, but there are\nexceptions (like Eurmal that has fewer)."}),"\n",(0,i.jsx)(t.p,{children:"Note that existing cults items will not get retrofitted with the common runemagic spells\nautomatically. The common runemagic spells will be marked on the actor sheet with a cult symbol as\nlong as they got the correct Rqid in the pre-migration Rqid form."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(8944).Z+"",width:"1191",height:"529"})}),"\n",(0,i.jsx)(t.h2,{id:"token-hud-effects",children:"Token HUD Effects"}),"\n",(0,i.jsx)(o,{issue:"54",repo:"fvtt-system-rqg"}),"\n",(0,i.jsxs)(t.p,{children:["The token effects have been updated to match some magic spells, like protection (1 - 4), strength,\nBefuddle, Bladesharp, Bludgeon, Coordination, Counter magic, Demoralize, Dullblade, Fanatacism,\nFireblade, Glamour, Glue, Ironhand, Lantern, Light, Mobility, Parry, Shimmer, Slow, Spirit screen,\nVigour, as well as some of the previously ones like Asleep, Prone etc. In addition there are 6\ngeneral purpose effects. If you install the module\n",(0,i.jsx)(t.a,{href:"https://foundryvtt.com/packages/times-up",children:"Times Up"}),", the effects with a background all disappear\nafter 10 melee rounds, and the ones with a brighter orange background actually affect the actor as\nwell (using active effects)."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(27).Z+"",width:"377",height:"407"})}),"\n",(0,i.jsx)(t.h2,{id:"actorsheet-wounded-effects",children:"ActorSheet wounded effects"}),"\n",(0,i.jsx)(t.p,{children:"The actor sheet now makes wounds more immersive, starting with a red tint if the actor is wounded\ngoing through blurring and eventually greyscale if the actor is shocked, unconscious or dead."}),"\n",(0,i.jsx)(t.h2,{id:"skills-without-specialisation-warning-on-actor-sheet",children:"Skills without specialisation warning on Actor Sheet"}),"\n",(0,i.jsx)(t.p,{children:"Previously you would get a dialog forcing you to specify the specialization of a skill that had an\nunspecified specialization (...) when you dragged it to an actor. Now the skill is embedded - but\nyou get a warning on the skill-tab that you should complete the skill by entering what the skill\nspecialization is."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(8663).Z+"",width:"825",height:"263"})})]})}function c(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8944:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/common-rune-magic-marks-efb724a900fb18159a6b368b0bfe6ce1.png"},3555:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/hit-location-rqids-12cf1fe80bb3eb75b57a48c72895f0f1.png"},2612:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/not-found-weapon-skill-link-f7e482273a0660956abc98979ab7ad69.png"},4923:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/old-ae-warning-94d8de9d6e897e47933cc12f6e98ed0a.png"},8663:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/skill-specialization-warning-df6bdc7de119b4ab47156278d8afbec0.png"},2163:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/string-active-effect-919b97bcf8cea8165ad6619352bdcae7.png"},27:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/token-effects-416b0a774e9d72a96c59cb532393b1d5.png"},2789:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/weapon-skill-rqids-ff858509159f3778c8a01dda367f38f6.png"},1151:(e,t,n)=>{n.d(t,{Z:()=>l,a:()=>a});var i=n(7294);const s={},o=i.createContext(s);function a(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);