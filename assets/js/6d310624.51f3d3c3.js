"use strict";(self.webpackChunksun_dragon_cult=self.webpackChunksun_dragon_cult||[]).push([[4077],{710:e=>{e.exports=JSON.parse('{"permalink":"/release-notes/rqg-v5.1.0","source":"@site/release-notes/rqg/v5.0.x/2025-08-02-v5.1.0.mdx","title":"RQG 5.1.0","description":"Supported Foundry Versions","date":"2025-08-02T00:00:00.000Z","tags":[{"inline":true,"label":"rqg","permalink":"/release-notes/tags/rqg"},{"inline":true,"label":"rqg-5","permalink":"/release-notes/tags/rqg-5"},{"inline":true,"label":"rqg-5-1","permalink":"/release-notes/tags/rqg-5-1"}],"readingTime":4.32,"hasTruncateMarker":false,"authors":[],"frontMatter":{"slug":"rqg-v5.1.0","title":"RQG 5.1.0","tags":["rqg","rqg-5","rqg-5-1"]},"unlisted":false,"nextItem":{"title":"RQG 5.0.0","permalink":"/release-notes/rqg-v5.0.0"}}')},2199:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/behavior-settings-87cbab24b27c342c938771b123d76c16.png"},2770:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/token-ruler-settings-98a6d34e458af10e350126e9daf99a44.png"},3135:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var s=n(710),i=n(6070),r=n(4331);const o={slug:"rqg-v5.1.0",title:"RQG 5.1.0",tags:["rqg","rqg-5","rqg-5-1"]},a=void 0,l={authorsImageUrls:[]},d=[{value:"System native drag-ruler module replacement",id:"system-native-drag-ruler-module-replacement",level:2},{value:"Add a clickable region behavior",id:"add-a-clickable-region-behavior",level:2},{value:"Open a journal entry using Rqid (or anything else with a Rqid like an actor or item)",id:"open-a-journal-entry-using-rqid-or-anything-else-with-a-rqid-like-an-actor-or-item",level:4},{value:"Open something specific using UUID",id:"open-something-specific-using-uuid",level:4},{value:"Run a macro via UUID (could use Rqid also)",id:"run-a-macro-via-uuid-could-use-rqid-also",level:4},{value:"Apply 5 points of damage to the head to all targeted tokens",id:"apply-5-points-of-damage-to-the-head-to-all-targeted-tokens",level:4},{value:"Do different things depending on modifier key presses",id:"do-different-things-depending-on-modifier-key-presses",level:4},{value:"Other Bug Fixes &amp; Improvements",id:"other-bug-fixes--improvements",level:2}];function h(e){const t={a:"a",code:"code",h2:"h2",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{GithubIssue:s}=t;return s||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("GithubIssue",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{src:"https://img.shields.io/endpoint?url=https://foundryshields.com/version?url=https://github.com/sun-dragon-cult/fvtt-system-rqg/releases/download/v5.1.0/system.json",alt:"Supported Foundry Versions"}),"\n",(0,i.jsx)(t.img,{src:"https://img.shields.io/github/downloads/sun-dragon-cult/fvtt-system-rqg/v5.1.0/rqg.zip",alt:"Download Count"})]}),"\n",(0,i.jsx)(t.p,{children:"This release adds two bigger features, and fixes a really bad bug related to combat."}),"\n",(0,i.jsx)(t.h2,{id:"system-native-drag-ruler-module-replacement",children:"System native drag-ruler module replacement"}),"\n",(0,i.jsx)(s,{issue:"771",repo:"fvtt-system-rqg"}),"\n",(0,i.jsx)(t.p,{children:"The drag-ruler module is not compatible with Foundry v13. This release introduces a system native\nimplementation that uses the new Foundry Token Drag Measurement API to color code token movement."}),"\n",(0,i.jsx)(t.p,{children:"There is some intregration with the Foundry movement actions. If you change the token movement to\nswim or fly, then the MOV will be updated to reflect that according to the setting on the actor\nsheet."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(3660).A+"",width:"878",height:"298"})}),"\n",(0,i.jsx)(t.p,{children:"How the drag ruler looks when dragging a token. The line is color coded according to the MOV of the\ntoken and the settings (see below). The hexes / squares are colored by Foundry to match the user\ncolor."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(3962).A+"",width:"300",height:"289"})}),"\n",(0,i.jsxs)(t.p,{children:["Actor sheet in edit mode where you can set the MOV for various locomotion modes. If you change the\ntoken movement, it will use the MOV values from the actor sheet to match the selected locomotion\nmode. see ",(0,i.jsx)(t.a,{href:"https://foundryvtt.com/releases/13.341#token-drag",children:"Foundry 13 Haul and Drag"}),". The drag\nruler is only visible for tokens that are in combat."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(2770).A+"",width:"1716",height:"656"})}),"\n",(0,i.jsx)(t.p,{children:"You can find the settings for the drag ruler in the system settings dialog."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(4472).A+"",width:"480",height:"607"})}),"\n",(0,i.jsx)(t.p,{children:"The settings dialog for the drag ruler. The settings are explained in the dialog. The colors are for\nthe different ranges."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Attack: half MOV - you can still attack after moving this far."}),"\n",(0,i.jsx)(t.li,{children:"Walk: full MOV - you can walk this far but loose your attack."}),"\n",(0,i.jsx)(t.li,{children:"Sprint: range is decided by the sprint setting. It's off (0) by default since this is an optional,\nnon standard rule."}),"\n",(0,i.jsx)(t.li,{children:"Unreachable: you cannot move here. Note that you will not be prevented to move, but the line will\nbe red (or whatever color you set it to)."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"add-a-clickable-region-behavior",children:"Add a clickable region behavior"}),"\n",(0,i.jsx)(s,{issue:"775",repo:"fvtt-system-rqg"}),"\n",(0,i.jsx)(t.p,{children:'This adds the possibility to write scripts that run when you click on regions. It\'s done in the form\nof a region behavior called "Click to Execute Script". You add one by creating a region, go to the\nBehaviors tab and press +'}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(8563).A+"",width:"741",height:"434"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(2199).A+"",width:"400",height:"808"})}),"\n",(0,i.jsx)(t.p,{children:'Adding a behavior will open the settings dialog. The top part with "Behavior Identity" and "Behavior\nStatus" behaves in the same way as other Foundry behaviors. You can name and disable the behavior\nhere.'}),"\n",(0,i.jsx)(t.p,{children:'In the next section the "Hover Pointer" lets you decide if the mouse pointer should change while\nhovering over the clickable region.'}),"\n",(0,i.jsx)(t.p,{children:'The two text boxes for "Left Click Script" and "Right Click Script" accepts javascript and that\njavascript will be run when you left or right-click on the region.'}),"\n",(0,i.jsx)(t.p,{children:'Each region can have multiple behaviors, even multiple "Click to Execute Script" behaviors. And you\ncan have multiple regions that may overlap each other. If you have multiple "Click to Execute\nScript" behaviors they all will run even if they overlap.'}),"\n",(0,i.jsx)(t.p,{children:"As the hint text between the script boxes says you have access to variables in the scripts in case\nyou want to check something about the event, behavior, region or scene. You could for example check\nif the shift key was pressed while you clicked and do something else in that case."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(4866).A+"",width:"108",height:"219"})}),"\n",(0,i.jsx)(t.p,{children:"The click is only detected while you are on the TokenLayer - in other words while you are editing\nthe regions it will not register the clicks, you have to have the top left tool selected."}),"\n",(0,i.jsx)(t.p,{children:"This makes it quite powerful, but also less user-friendly since you need to know a bit of javascript\nto make something happen. Here are some snippets to get started:"}),"\n",(0,i.jsx)(t.h4,{id:"open-a-journal-entry-using-rqid-or-anything-else-with-a-rqid-like-an-actor-or-item",children:"Open a journal entry using Rqid (or anything else with a Rqid like an actor or item)"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'game.system.api.rqid.renderRqidDocument("je..axis-mundi", "en");\n'})}),"\n",(0,i.jsx)(t.h4,{id:"open-something-specific-using-uuid",children:"Open something specific using UUID"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'// This can open anything in the world\nfromUuidSync("Actor.BKBAy0w4MgvgYeKZ").sheet.render(true);\n\n// With this syntax you can also open documents from the compendiums\n(await fromUuid("Compendium.wiki-en-rqg.cults.Item.61zfpHEpM9RtE6XS")).sheet.render(true);\n'})}),"\n",(0,i.jsx)(t.h4,{id:"run-a-macro-via-uuid-could-use-rqid-also",children:"Run a macro via UUID (could use Rqid also)"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'fromUuidSync("Macro.ufYFMHFOpuncTeiq").execute();\n'})}),"\n",(0,i.jsx)(t.h4,{id:"apply-5-points-of-damage-to-the-head-to-all-targeted-tokens",children:"Apply 5 points of damage to the head to all targeted tokens"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"game.user.targets.forEach((token) => token.actor.applyDamage(5, 20));\n"})}),"\n",(0,i.jsx)(t.h4,{id:"do-different-things-depending-on-modifier-key-presses",children:"Do different things depending on modifier key presses"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'let message = "You clicked this region";\n\nif (event.ctrlKey) {\n  message += " and held the ctrl key at the same time";\n}\nif (event.altKey) {\n  message += " and held the alt key at the same time";\n}\nif (event.shiftKey) {\n  message += " and held the shift key at the same time";\n}\n\nui.notifications.info(message);\n'})}),"\n",(0,i.jsx)(t.h2,{id:"other-bug-fixes--improvements",children:"Other Bug Fixes & Improvements"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["CombatTracker etc needs v13 updates. Not sure how I missed this in the previous version, but it\nshould now be updated to work with Foundry v13. ",(0,i.jsx)(s,{issue:"777",repo:"fvtt-system-rqg"})]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Calculation of Dodge and Jump skill chance in skillSheet was wrong. It did not update the base\nchance according to actor DEX correctly. ",(0,i.jsx)(s,{issue:"785",repo:"fvtt-system-rqg"})]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},3660:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/token-ruler-drag-a9ddb3693333dc97a46278f664f3f57a.png"},3962:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/token-ruler-actor-mov-dc4c6d4b7f0c1b1784204fd5f9e0ec52.png"},4331:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(758);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}},4472:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/token-ruler-settings-dialog-7a2afc79500e26207a588dfecf477db1.png"},4866:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/behavior-tokenlayer-629f88addedb54d335f5cbb8345020ad.png"},8563:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/behavior-add-57c4df6112f5e53133e6d848bef2e088.png"}}]);